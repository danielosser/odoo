/** @odoo-module **/

import { Define } from '@mail/define';

export default Define`
    {Element}
        [Element/name]
            button
        [Element/model]
            DiscussMobileMailboxSelectionComponent
        [web.Element/tag]
            button
        [web.Element/class]
            btn
            btn-secondary
            {if}
                @record
                .{DiscussMobileMailboxSelectionComponent/discuss}
                .{Discuss/thread}
                .{=}
                    @template
                    .{Template/mailbox}
            .{then}
                active
                o-isActive
        [Element/t-foreach]
            {DiscussMobileMailboxSelectionComponent/getOrderedMailboxes}
                @record
        [Element/t-as]
            mailbox
        [Element/t-key]
            @template
            .{Template/mailbox}
            .{Record/id}
        [Element/onClick]
            {if}
                @ev
                .{web.MouseEvent/currentTarget}
                .{web.Element/dataset}
                .{Dict/hasKey}
                    mailboxLocalId
                .{isFalsy}
            .{then}
                {break}
            {Thread/open}
                {Record/get}
                    @ev
                    .{web.MouseEvent/currentTarget}
                    .{web.Element/dataset}
                    .{Dict/valueAt}
                        mailboxLocalId
        [web.Element/data-mailbox-local-id]
            @template
            .{Template/mailbox}
            .{Record/id}
        [web.Element/type]
            button
        [web.Element/textContent]
            @template
            .{Template/mailbox}
            .{Thread/name}
        [web.Element/style]
            [web.scss/flex]
                1
                1
                0
            [web.scss/padding]
                {scss/map-get}
                    {scss/$spacers}
                    2
            [web.scss/z-index]
                1
            {if}
                @record
                .{DiscussMobileMailboxSelectionComponent/discuss}
                .{Discuss/thread}
                .{=}
                    @template
                    .{Template/mailbox}
            .{then}
                [web.scss/z-index]
                    2
`;
