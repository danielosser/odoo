<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="website.s_dynamic_snippet.carousel.arrows">
        <a t-attf-href="##{uniqueId}" t-attf-class="o_w_carousel_control carousel-control-prev" data-slide="prev" role="button" aria-label="Previous" title="Previous">
            <span class="fa fa-chevron-circle-left fa-2x"/>
            <span class="sr-only">Previous</span>
        </a>
        <a t-attf-href="##{uniqueId}" t-attf-class="o_w_carousel_control carousel-control-next" data-slide="next" role="button" aria-label="Next" title="Next">
            <span class="fa fa-chevron-circle-right fa-2x"/>
            <span class="sr-only">Next</span>
        </a>
    </t>
    <t t-name="website.s_dynamic_snippet.carousel">
        <div t-att-id="uniqueId" t-attf-class="carousel slide arrow-position-#{arrowPosition}" t-att-data-interval="interval">
            <!-- Content -->
            <t t-set="slideSize" t-value="chunkSize * rowPerSlide" />
            <t t-set="colClass" t-value="'d-flex flex-grow-0 flex-shrink-0 col-' + Math.trunc(12 / chunkSize).toString()"/>
            <t t-set="slideIndexGenerator" t-value="Array.from(Array(Math.ceil(data.length/slideSize)).keys())"/>
            <t t-set="rowIndexGenerator" t-value="Array.from(Array(rowPerSlide).keys())"/>
            <t t-set="colIndexGenerator" t-value="Array.from(Array(chunkSize).keys())"/>
            <div class="carousel-inner row w-100 mx-auto" role="listbox">
                <t t-foreach="slideIndexGenerator" t-as="slideIndex">
                    <t t-set="slideOffset" t-value="slideIndex * slideSize"/>
                    <div t-attf-class="carousel-item #{extraClasses} #{slideIndex_first ? 'active' : ''}">
                        <t t-foreach="rowIndexGenerator" t-as="rowIndex">
                            <t t-set="rowOffset" t-value="slideOffset + (rowIndex * chunkSize)"/>
                            <t t-if="rowOffset &lt; data.length">
                                <div t-attf-class="row">
                                    <t t-foreach="colIndexGenerator" t-as="colIndex">
                                        <t t-set="itemIndex" t-value="rowOffset + colIndex"/>
                                        <t t-if="itemIndex &lt; data.length">
                                            <div t-attf-class="#{colClass}">
                                                <t t-out="data[itemIndex]"/>
                                            </div>
                                        </t>
                                    </t>
                                </div>
                            </t>
                        </t>
                    </div>
                </t>
            </div>
            <!-- Controls -->
            <t t-if='slideIndexGenerator.length > 1'>
                <t t-if="arrowPosition === 'bottom'">
                    <div class="o_w_dynamic_snippet_arrow_bottom pt-2 d-flex justify-content-center">
                        <t t-call="website.s_dynamic_snippet.carousel.arrows">
                            <t t-set="uniqueId" t-value="uniqueId" />
                        </t>
                    </div>
                </t>
                <t t-else="">
                    <t t-call="website.s_dynamic_snippet.carousel.arrows">
                        <t t-set="uniqueId" t-value="uniqueId" />
                    </t>
                </t>
            </t>
        </div>
    </t>
</templates>
