/** @odoo-module **/

import { Define } from '@mail/define';

export default Define`
    {Element}
        [Element/name]
            emoji
        [Element/model]
            EmojisPopoverComponent
        [web.Element/tag]
            span
        [Element/t-foreach]
            @record
            .{EmojisPopoverComponent/emojis}
        [Element/t-as]
            emoji
        [Element/t-key]
            @template
            .{Template/emoji}
            .{Emoji/unicode}
        [Element/onClick]
            {EmojisPopoverComponent/close}
                @record
            {if}
                @record
                .{EmojisPopoverComponent/composerViewComponents}
            .{then}
                {web.Event/stopPropagation}
                    @ev
                {foreach}
                    @record
                    .{EmojisPopoverComponent/composerViewComponents}
                .{as}
                    composerViewComponent
                .{do}
                    {ComposerTextInputComponent/saveStateInStore}
                        @composerViewComponent
                        .{ComposerViewComponent/textInput}
                    {ComposerView/insertIntoTextInput}
                        @composerViewComponent
                        .{ComposerViewComponent/composerView}
                        @ev
                        .{web.Event/detail}
                        .{web.Detail/unicode}
                    {if}
                        {Device/isMobileDevice}
                        .{isFalsy}
                    .{then}
                        {Record/update}
                            [0]
                                @record
                                .{ComposerViewComponent/composerView}
                            [1]
                                [ComposerView/doFocus]
                                    true
        [web.Element/title]
            @template
            .{Template/emoji}
            .{Emoji/description}
        [web.Element/data-source]
            @template
            .{Template/emoji}
            .{Emoji/sources}
            .{Collection/first}
        [web.Element/data-unicode]
            @template
            .{Template/emoji}
            .{Emoji/unicode}
        [web.Element/textContent]
            @template
            .{Template/emoji}
            .{Emoji/unicode}
        [web.Element/style]
            [web.scss/font-size]
                1.1
                em
            [web.scss/margin]
                {scss/map-get}
                    {scss/$spacers}
                    1
            [web.scss/cursor]
                pointer
`;
